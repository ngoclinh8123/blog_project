import{r,i as U,m as Z,l as J,a0 as ue,q as T,e as k,a8 as pe,k as _e,aZ as ge,a_ as fe,a$ as he,aR as ve,s as be,I as ye,aM as Se,A as xe,g as D,Y as Ce,x as $e,j as l,a as $,E as Oe,V as B,U as M,W as Ne}from"./index-2e9a0365.js";import{e as Pe}from"./edjsHTML.node-2ca43bc1.js";import{c as ze}from"./convert_date-93db2282.js";import{b as q,I as we}from"./index-b8c633f2.js";import{u as Ee}from"./useBreakpoint-8fda81fb.js";import{r as je}from"./EyeOutlined-23457990.js";const G=r.createContext("default"),X=e=>{let{children:n,size:o}=e;const t=r.useContext(G);return r.createElement(G.Provider,{value:o||t},n)},ke=e=>{const{antCls:n,componentCls:o,iconCls:t,avatarBg:a,avatarColor:p,avatarSizeBase:c,avatarSizeLG:_,avatarSizeSM:g,avatarFontSizeBase:f,avatarFontSizeLG:m,avatarFontSizeSM:b,borderRadius:y,borderRadiusLG:S,borderRadiusSM:h,lineWidth:N,lineType:P}=e,s=(d,u,v)=>({width:d,height:d,lineHeight:`${d-N*2}px`,borderRadius:"50%",[`&${o}-square`]:{borderRadius:v},[`${o}-string`]:{position:"absolute",left:{_skip_check_:!0,value:"50%"},transformOrigin:"0 center"},[`&${o}-icon`]:{fontSize:u,[`> ${t}`]:{margin:0}}});return{[o]:Object.assign(Object.assign(Object.assign(Object.assign({},J(e)),{position:"relative",display:"inline-block",overflow:"hidden",color:p,whiteSpace:"nowrap",textAlign:"center",verticalAlign:"middle",background:a,border:`${N}px ${P} transparent`,["&-image"]:{background:"transparent"},[`${n}-image-img`]:{display:"block"}}),s(c,f,y)),{["&-lg"]:Object.assign({},s(_,m,S)),["&-sm"]:Object.assign({},s(g,b,h)),"> img":{display:"block",width:"100%",height:"100%",objectFit:"cover"}})}},Re=e=>{const{componentCls:n,avatarGroupBorderColor:o,avatarGroupSpace:t}=e;return{[`${n}-group`]:{display:"inline-flex",[`${n}`]:{borderColor:o},["> *:not(:first-child)"]:{marginInlineStart:t}}}},Q=U("Avatar",e=>{const{colorTextLightSolid:n,controlHeight:o,controlHeightLG:t,controlHeightSM:a,fontSize:p,fontSizeLG:c,fontSizeXL:_,fontSizeHeading3:g,marginXS:f,colorBorderBg:m,colorTextPlaceholder:b}=e,y=Z(e,{avatarBg:b,avatarColor:n,avatarSizeBase:o,avatarSizeLG:t,avatarSizeSM:a,avatarFontSizeBase:Math.round((c+_)/2),avatarFontSizeLG:g,avatarFontSizeSM:p,avatarGroupSpace:-f,avatarGroupBorderColor:m});return[ke(y),Re(y)]});var Be=globalThis&&globalThis.__rest||function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const Ie=(e,n)=>{const o=r.useContext(G),[t,a]=r.useState(1),[p,c]=r.useState(!1),[_,g]=r.useState(!0),f=r.useRef(null),m=r.useRef(null),b=ue(n,f),{getPrefixCls:y}=r.useContext(T),S=()=>{if(!m.current||!f.current)return;const C=m.current.offsetWidth,O=f.current.offsetWidth;if(C!==0&&O!==0){const{gap:w=4}=e;w*2<O&&a(O-w*2<C?(O-w*2)/C:1)}};r.useEffect(()=>{c(!0)},[]),r.useEffect(()=>{g(!0),a(1)},[e.src]),r.useEffect(()=>{S()},[e.gap]);const h=()=>{const{onError:C}=e;(C?C():void 0)!==!1&&g(!1)},{prefixCls:N,shape:P="circle",size:s="default",src:d,srcSet:u,icon:v,className:j,rootClassName:A,alt:L,draggable:oe,children:W,crossOrigin:re}=e,R=Be(e,["prefixCls","shape","size","src","srcSet","icon","className","rootClassName","alt","draggable","children","crossOrigin"]),x=s==="default"?o:s,ae=Object.keys(typeof x=="object"?x||{}:{}).some(C=>["xs","sm","md","lg","xl","xxl"].includes(C)),H=Ee(ae),se=r.useMemo(()=>{if(typeof x!="object")return{};const C=je.find(w=>H[w]),O=x[C];return O?{width:O,height:O,lineHeight:`${O}px`,fontSize:v?O/2:18}:{}},[H,x]),z=y("avatar",N),[ie,ce]=Q(z),le=k({[`${z}-lg`]:x==="large",[`${z}-sm`]:x==="small"}),F=r.isValidElement(d),me=k(z,le,{[`${z}-${P}`]:!!P,[`${z}-image`]:F||d&&_,[`${z}-icon`]:!!v},j,A,ce),de=typeof x=="number"?{width:x,height:x,lineHeight:`${x}px`,fontSize:v?x/2:18}:{};let E;if(typeof d=="string"&&_)E=r.createElement("img",{src:d,draggable:oe,srcSet:u,onError:h,alt:L,crossOrigin:re});else if(F)E=d;else if(v)E=v;else if(p||t!==1){const C=`scale(${t}) translateX(-50%)`,O={msTransform:C,WebkitTransform:C,transform:C},w=typeof x=="number"?{lineHeight:`${x}px`}:{};E=r.createElement(pe,{onResize:S},r.createElement("span",{className:`${z}-string`,ref:m,style:Object.assign(Object.assign({},w),O)},W))}else E=r.createElement("span",{className:`${z}-string`,style:{opacity:0},ref:m},W);return delete R.onError,delete R.gap,ie(r.createElement("span",Object.assign({},R,{style:Object.assign(Object.assign(Object.assign({},de),se),R.style),className:me,ref:b}),E))},Te=r.forwardRef(Ie),V=Te,I=e=>e?typeof e=="function"?e():e:null,Ae=e=>{const{componentCls:n,popoverBg:o,popoverColor:t,width:a,fontWeightStrong:p,popoverPadding:c,boxShadowSecondary:_,colorTextHeading:g,borderRadiusLG:f,zIndexPopup:m,marginXS:b,colorBgElevated:y}=e;return[{[n]:Object.assign(Object.assign({},J(e)),{position:"absolute",top:0,left:{_skip_check_:!0,value:0},zIndex:m,fontWeight:"normal",whiteSpace:"normal",textAlign:"start",cursor:"auto",userSelect:"text","--antd-arrow-background-color":y,"&-rtl":{direction:"rtl"},"&-hidden":{display:"none"},[`${n}-content`]:{position:"relative"},[`${n}-inner`]:{backgroundColor:o,backgroundClip:"padding-box",borderRadius:f,boxShadow:_,padding:c},[`${n}-title`]:{minWidth:a,marginBottom:b,color:g,fontWeight:p},[`${n}-inner-content`]:{color:t}})},ge(e,{colorBg:"var(--antd-arrow-background-color)"}),{[`${n}-pure`]:{position:"relative",maxWidth:"none",[`${n}-content`]:{display:"inline-block"}}}]},Le=e=>{const{componentCls:n}=e;return{[n]:fe.map(o=>{const t=e[`${o}-6`];return{[`&${n}-${o}`]:{"--antd-arrow-background-color":t,[`${n}-inner`]:{backgroundColor:t},[`${n}-arrow`]:{background:"transparent"}}}})}},Me=e=>{const{componentCls:n,lineWidth:o,lineType:t,colorSplit:a,paddingSM:p,controlHeight:c,fontSize:_,lineHeight:g,padding:f}=e,m=c-Math.round(_*g),b=m/2,y=m/2-o,S=f;return{[n]:{[`${n}-inner`]:{padding:0},[`${n}-title`]:{margin:0,padding:`${b}px ${S}px ${y}px`,borderBottom:`${o}px ${t} ${a}`},[`${n}-inner-content`]:{padding:`${p}px ${S}px`}}}},K=U("Popover",e=>{const{colorBgElevated:n,colorText:o,wireframe:t}=e,a=Z(e,{popoverBg:n,popoverColor:o,popoverPadding:12});return[Ae(a),Le(a),t&&Me(a),_e(a,"zoom-big")]},e=>{let{zIndexPopupBase:n}=e;return{zIndexPopup:n+30,width:177}});var Ge=globalThis&&globalThis.__rest||function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const We=(e,n,o)=>{if(!(!n&&!o))return r.createElement(r.Fragment,null,n&&r.createElement("div",{className:`${e}-title`},I(n)),r.createElement("div",{className:`${e}-inner-content`},I(o)))};function He(e){const{hashId:n,prefixCls:o,className:t,style:a,placement:p="top",title:c,content:_,children:g}=e;return r.createElement("div",{className:k(n,o,`${o}-pure`,`${o}-placement-${p}`,t),style:a},r.createElement(he,Object.assign({},e,{className:n,prefixCls:o}),g||We(o,c,_)))}function Fe(e){const{prefixCls:n}=e,o=Ge(e,["prefixCls"]),{getPrefixCls:t}=r.useContext(T),a=t("popover",n),[p,c]=K(a);return p(r.createElement(He,Object.assign({},o,{prefixCls:a,hashId:c})))}var De=globalThis&&globalThis.__rest||function(e,n){var o={};for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&n.indexOf(t)<0&&(o[t]=e[t]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,t=Object.getOwnPropertySymbols(e);a<t.length;a++)n.indexOf(t[a])<0&&Object.prototype.propertyIsEnumerable.call(e,t[a])&&(o[t[a]]=e[t[a]]);return o};const qe=e=>{let{title:n,content:o,prefixCls:t}=e;return!n&&!o?null:r.createElement(r.Fragment,null,n&&r.createElement("div",{className:`${t}-title`},I(n)),r.createElement("div",{className:`${t}-inner-content`},I(o)))},ee=r.forwardRef((e,n)=>{var o,t;const{prefixCls:a,title:p,content:c,overlayClassName:_,placement:g="top",trigger:f="hover",mouseEnterDelay:m=.1,mouseLeaveDelay:b=.1,overlayStyle:y={},arrowPointAtCenter:S,arrow:h}=e,N=De(e,["prefixCls","title","content","overlayClassName","placement","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","arrowPointAtCenter","arrow"]),{getPrefixCls:P}=r.useContext(T),s=P("popover",a),[d,u]=K(s),v=P(),j=k(_,u),A=(t=(o=typeof h!="boolean"&&(h==null?void 0:h.arrowPointAtCenter))!==null&&o!==void 0?o:S)!==null&&t!==void 0?t:!1,L=h??{arrowPointAtCenter:A};return d(r.createElement(ve,Object.assign({placement:g,arrow:L,trigger:f,mouseEnterDelay:m,mouseLeaveDelay:b,overlayStyle:y},N,{prefixCls:s,overlayClassName:j,ref:n,overlay:r.createElement(qe,{prefixCls:s,title:p,content:c}),transitionName:be(v,"zoom-big",N.transitionName),"data-popover-inject":!0})))});ee._InternalPanelDoNotUseOrYouWillBeFired=Fe;const Xe=ee,Ye=e=>{const{getPrefixCls:n,direction:o}=r.useContext(T),{prefixCls:t,className:a,rootClassName:p,maxCount:c,maxStyle:_,size:g}=e,f=n("avatar",t),m=`${f}-group`,[b,y]=Q(f),S=k(m,{[`${m}-rtl`]:o==="rtl"},a,p,y),{children:h,maxPopoverPlacement:N="top",maxPopoverTrigger:P="hover"}=e,s=ye(h).map((u,v)=>Se(u,{key:`avatar-key-${v}`})),d=s.length;if(c&&c<d){const u=s.slice(0,c),v=s.slice(c,d);return u.push(r.createElement(Xe,{key:"avatar-popover-key",content:v,trigger:P,placement:N,overlayClassName:`${m}-popover`},r.createElement(V,{style:_},`+${d-c}`))),b(r.createElement(X,{size:g},r.createElement("div",{className:S,style:e.style},u)))}return b(r.createElement(X,{size:g},r.createElement("div",{className:S,style:e.style},s)))},Ue=Ye,te=V;te.Group=Ue;const Y=te;var Ze={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"};const Je=Ze;var ne=function(n,o){return r.createElement(xe,D(D({},n),{},{ref:o,icon:Je}))};ne.displayName="SendOutlined";const Qe=r.forwardRef(ne),Ve="_container_1i0eo_1",Ke="_blog_1i0eo_5",et="_post_content_1i0eo_8",tt="_title_1i0eo_14",nt="_content_1i0eo_20",ot="_post_info_1i0eo_25",rt="_post_info_content_1i0eo_32",at="_total_comment_1i0eo_38",st="_comment_form_block_1i0eo_42",it="_comment_form_1i0eo_42",ct="_item_add_comment_1i0eo_51",lt="_input_add_comment_1i0eo_54",mt="_btn_add_comment_1i0eo_57",dt="_comment_item_1i0eo_71",ut="_comment_sub_item_1i0eo_72",pt="_comment_item_content_1i0eo_96",_t="_comment_item_user_1i0eo_103",gt="_comment_item_title_1i0eo_108",ft="_comment_item_action_1i0eo_112",i={container:Ve,blog:Ke,post_content:et,title:tt,content:nt,post_info:ot,post_info_content:rt,total_comment:at,comment_form_block:st,comment_form:it,item_add_comment:ct,input_add_comment:lt,btn_add_comment:mt,comment_item:dt,comment_sub_item:ut,comment_item_content:pt,comment_item_user:_t,comment_item_title:gt,comment_item_action:ft};function Ct(){const[e,n]=r.useState(),[o,t]=r.useState([]),[a,p]=r.useState(!1),{id:c}=Ce(),_=r.useRef(null),{loggedIn:g,handleLogout:f,user:m}=r.useContext($e),b={labelCol:{span:8},wrapperCol:{span:16}},y={required:"${label} is required!",types:{email:"${label} is not a valid email!",number:"${label} is not a valid number!"},number:{range:"${label} must be between ${min} and ${max}"}};function S(){B.get(`/api/v1/post/${c}/`).then(s=>{const u=Pe().parse(JSON.parse(s.data.data.content));s.data.data.content=u,n(s.data.data)}).catch(s=>{})}function h(){B.get(`/api/v1/comment/${c}/`).then(s=>{t(s.data.data)}).catch(s=>{})}function N(s){B.delete(`/api/v1/comment/${s}/`).then(d=>{h()}).catch(d=>{})}const P=s=>{const d=c,u=0,v=s.comment;_.current.resetFields(),g?B.post("/api/v1/comment/",{parent_id:u,content:v,post:d}).then(j=>{h(),M.success("Add comment successfully")}).catch(j=>{M.error("Error while adding comment")}):M.error("Please login to do this action")};return r.useEffect(()=>{S(),h()},[a]),r.useEffect(()=>{Ne(()=>{p(!0)})},[]),l("div",{className:i.container,children:e&&$("div",{className:i.blog,children:[$("div",{className:i.post_content,children:[l("h2",{className:i.title,children:e.title}),l("div",{dangerouslySetInnerHTML:{__html:e.content},className:i.content}),l("div",{className:i.post_info,children:$("div",{className:i.post_info_content,children:[l("span",{children:ze(e.created_at)}),l("span",{children:e.customer.username})]})})]}),$("div",{className:i.comment_block,children:[$("div",{className:i.total_comment,children:[l("span",{children:"Comment"}),$("span",{children:["( ",o.length," )"]})]}),l("div",{className:i.comment_form_block,children:$(q,{ref:_,className:i.comment_form,...b,name:"nest-messages",onFinish:P,style:{maxWidth:600},validateMessages:y,children:[l(q.Item,{className:i.item_add_comment,name:["comment"],rules:[{required:!0}],children:l(we.TextArea,{placeholder:"Your comment...",className:i.input_add_comment,style:{flexGrow:1}})}),l(Oe,{className:i.btn_add_comment,type:"primary",htmlType:"submit",icon:l(Qe,{})})]})}),o.length>0&&o.map((s,d)=>$("div",{className:i.comment_item_wrap,children:[$("div",{className:i.comment_item,children:[l("div",{className:i.comment_item_avatar,children:l(Y,{style:{backgroundColor:"#f56a00",verticalAlign:"middle"},size:"medium",children:s.customer.username[0]})}),$("div",{className:i.comment_item_content_action,children:[$("div",{className:i.comment_item_content,children:[l("div",{className:i.comment_item_user,children:s.customer.username}),l("div",{className:i.comment_item_title,children:s.content})]}),l("div",{className:i.comment_item_action,children:m.username===s.customer.username&&l("span",{onClick:()=>N(s.id),children:"Delete"})})]})]}),s.childs&&s.childs.map((u,v)=>$("div",{className:i.comment_sub_item,children:[l("div",{className:i.comment_item_avatar,children:l(Y,{style:{backgroundColor:"#f56a00",verticalAlign:"middle"},size:"medium",children:u.customer.username[0]})}),$("div",{className:i.comment_item_content_action,children:[$("div",{className:i.comment_item_content,children:[l("div",{className:i.comment_item_user,children:u.customer.username}),l("div",{className:i.comment_item_title,children:u.content})]}),l("div",{className:i.comment_item_action,children:m.username===u.customer.username&&l("span",{onClick:()=>N(u.id),children:"Delete"})})]})]},v))]},d))]})]})})}export{Ct as default};
